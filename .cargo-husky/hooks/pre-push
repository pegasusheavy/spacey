#!/bin/sh
# Pre-push hook: full test suite
# This runs before pushing to ensure all tests pass

set -e

echo "ğŸš€ Running pre-push checks..."

# Run the full test suite
echo "ğŸ§ª Running full test suite..."
if ! cargo test --all; then
    echo "âŒ Tests failed!"
    echo "   Fix failing tests before pushing."
    exit 1
fi
echo "âœ… All tests passed"

# Check that the project builds in release mode
echo "ğŸ”¨ Checking release build..."
if ! cargo build --release; then
    echo "âŒ Release build failed!"
    exit 1
fi
echo "âœ… Release build OK"

# Run clippy with all features
echo "ğŸ“ Running clippy (all features)..."
if ! cargo clippy --all-targets --all-features -- -D warnings; then
    echo "âŒ Clippy found issues!"
    exit 1
fi
echo "âœ… Clippy OK"

echo "âœ¨ All pre-push checks passed! Ready to push."

